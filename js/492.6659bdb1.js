"use strict";(self["webpackChunkproject_vue3_finally"]=self["webpackChunkproject_vue3_finally"]||[]).push([[492],{3633:function(t,e){e["Z"]={saveFavorite(t){const e=JSON.stringify(t);localStorage.setItem("favoriteProduct",e)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},2492:function(t,e,s){s.r(e),s.d(e,{default:function(){return T}});var i=s(3396),a=s(7139),c=s(9242);const l=(0,i.uE)('<section class="mt-6"><div class="banner d-flex flex-column justify-content-center align-items-center"><div class="text-center"><h1 class="banner-title mb-3">收藏清單</h1><span class="banner-text">我們的和菓子一級棒！別猶豫了，趕緊加入購物車吧！</span></div></div></section>',1),n={class:"container"},r={"aria-label":"breadcrumb"},o={class:"breadcrumb my-3"},d={class:"breadcrumb-item"},u=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},"我的收藏",-1),h={key:0,class:"my-5"},p={class:"container"},v={class:"border border-2 px-2 py-5 p-lg-5"},g=(0,i._)("h2",{class:"text-center text-brown fw-bold"},"收藏清單目前是空的！",-1),m={class:"col-5 col-md-2 mx-auto mt-5"},b={key:1,class:"my-5"},_={class:"container"},f={class:"border border-2 px-1 py-5 p-lg-5"},w={class:"table-responsive-md"},x={class:"table text-nowrap"},y=(0,i._)("thead",{class:"table-beige text-brown"},[(0,i._)("tr",null,[(0,i._)("th",{colspan:"2",style:{width:"50%"}},"商品"),(0,i._)("th",{class:"text-end",style:{width:"25%"}},"單價"),(0,i._)("th")])],-1),L={class:"text-brown"},k=["src","alt"],F={class:"align-middle"},C={class:"fs-5 mb-0"},D={class:"align-middle text-end"},S={key:0,class:"fs-6 mb-0 text-decoration-line-through"},P={class:"fs-5 mb-0"},Z={class:"align-middle text-end"},$={class:"p-0"},j=["onClick"],M=(0,i._)("i",{class:"bi bi-cart4"},null,-1),N=[M],z=["onClick"],O=(0,i._)("i",{class:"bi bi-trash"},null,-1),U=[O];function W(t,e,s,M,O,W){const q=(0,i.up)("LoadingView"),H=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(q,{active:O.isLoading},null,8,["active"]),l,(0,i._)("section",null,[(0,i._)("div",n,[(0,i._)("nav",r,[(0,i._)("ol",o,[(0,i._)("li",d,[(0,i.Wm)(H,{class:"breadcrumb-text",to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)("首頁")])),_:1})]),u])])])]),O.faveList.length?((0,i.wg)(),(0,i.iD)("section",b,[(0,i._)("div",_,[(0,i._)("div",f,[(0,i._)("div",w,[(0,i._)("table",x,[y,(0,i._)("tbody",L,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(O.faveProduct,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i._)("td",null,[(0,i._)("img",{style:{width:"160px",height:"107px"},src:t.imageUrl,alt:t.title},null,8,k)]),(0,i._)("td",F,[(0,i._)("p",C,(0,a.zw)(t.title),1)]),(0,i._)("td",D,[t.origin_price!==t.price?((0,i.wg)(),(0,i.iD)("p",S,"NT$ "+(0,a.zw)(t.origin_price),1)):(0,i.kq)("",!0),(0,i._)("p",P,"NT$ "+(0,a.zw)(t.price),1)]),(0,i._)("td",Z,[(0,i._)("div",$,[(0,i._)("button",{type:"button",onClick:(0,c.iM)((e=>W.addCart(t.id,1)),["prevent"]),class:"btn-cart rounded-circle p-0 me-2"},N,8,j),(0,i._)("button",{type:"button",onClick:(0,c.iM)((e=>W.delFave(t)),["prevent"]),class:"btn-trash rounded-circle p-0 me-1"},U,8,z)])])])))),128))])])])])])])):((0,i.wg)(),(0,i.iD)("section",h,[(0,i._)("div",p,[(0,i._)("div",v,[g,(0,i._)("div",m,[(0,i.Wm)(H,{to:"/productList",class:"btn btn-outline-brown btn-sm w-100"},{default:(0,i.w5)((()=>[(0,i.Uk)("來去逛逛吧！")])),_:1})])])])]))],64)}var q=s(3633),H={data(){return{faveList:q.Z.getFavorite()||[],faveProduct:[],isLoading:!1}},inject:["emitter"],methods:{getFave(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/gary123-api/products/all";this.axios.get(t).then((t=>{t.data.success&&(this.isLoading=!1,this.faveProduct=t.data.products.filter((t=>this.faveList.includes(t.id))))})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},updateFave(){this.faveList=q.Z.getFavorite()},delFave(t){this.isLoading=!0,this.faveList.splice(this.faveList.indexOf(t.id),1),this.$httpMessageStatus({data:{success:!0}},`已將 ${t.title} 移除收藏清單`),this.isLoading=!1,q.Z.saveFavorite(this.faveList),this.emitter.emit("update-fave",this.faveList),this.getFave()},addCart(t,e){this.isLoading=!0;const s="https://vue3-course-api.hexschool.io/api/gary123-api/cart",i={product_id:t,qty:e};this.axios.post(s,{data:i}).then((e=>{e.data.success&&(this.emitter.emit("update-cart",t),this.isLoading=!1,this.getFave(),this.$httpMessageStatus(e,"加入購物車"))})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))}},created(){this.emitter.on("update-fave",this.updateFave),this.getFave()}},I=s(89);const J=(0,I.Z)(H,[["render",W]]);var T=J}}]);
//# sourceMappingURL=492.6659bdb1.js.map