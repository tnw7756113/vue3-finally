"use strict";(self["webpackChunkproject_vue3_finally"]=self["webpackChunkproject_vue3_finally"]||[]).push([[720],{5720:function(e,s,l){l.r(s),l.d(s,{default:function(){return de}});var a=l(3396),t=l(7139),r=l(9242);const o=(0,a._)("section",{class:"mt-7"},[(0,a._)("div",{class:"container"},[(0,a._)("div",{class:"row justify-content-center align-items-center position-relative mt-5"},[(0,a._)("div",{class:"col-10"},[(0,a._)("div",{class:"progress mx-3",style:{height:"5px"}},[(0,a._)("div",{class:"progress-bar bg-brown",role:"progressbar",style:{width:"50%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})])]),(0,a._)("div",{class:"col-10 d-flex justify-content-between position-absolute top-0 translate-middle-y mt-3 text-brown"},[(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-brown text-beige rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-bag-check-fill"})]),(0,a._)("p",{class:"mb-0"},"購物車")]),(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-brown text-beige rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-clipboard-check-fill"})]),(0,a._)("p",{class:"mb-0"},"填寫資料")]),(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-secondary rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-credit-card-fill"})]),(0,a._)("p",{class:"mb-0"},"付款確認")])])])])],-1),c={class:"mt-5"},i={class:"container"},d={class:"row g-3 my-5 flex-lg-row-reverse"},n={class:"col-12 col-lg-6 text-brown"},m={class:"border border-2 p-3 p-md-5"},u={class:"row row-cols-1 g-5"},_={class:"col"},b=(0,a._)("h2",{class:"fs-3"},[(0,a._)("i",{class:"bi bi-flower3"}),(0,a.Uk)("購物清單")],-1),p={class:"row flex-column g-3 mt-3"},f={class:"card border-0"},v={class:"row"},w={class:"col-md-5"},h=["src","alt"],g={class:"col-md-7"},y={class:"card-body p-0 text-brown"},x={class:"card-title fw-bold"},V={class:"card-text"},k={class:"card-text"},W={class:"col d-flex flex-column justify-content-between"},$=(0,a._)("h2",{class:"fs-3"},[(0,a._)("i",{class:"bi bi-flower3"}),(0,a.Uk)("購物總計")],-1),z={class:"mt-3 w-100"},U={class:"text-end py-2",colspan:"3"},C=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"商品金額",-1),E={class:"text-end w-50"},N=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"運費總計",-1),T={class:"text-end w-50"},j={class:"text-success"},q=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"優惠折扣",-1),L={class:"text-end w-50"},D={class:"border-top border-brown"},M=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"總計金額",-1),F={class:"text-end w-50"},H={class:"col-12 col-lg-6 text-brown"},Q={class:"border border-2 p-3 p-md-5 h-100"},Y={class:"row g-5"},A={class:"col-12"},K=(0,a._)("h2",{class:"fs-3"},[(0,a._)("i",{class:"bi bi-flower3"}),(0,a.Uk)("收件人資料")],-1),O={class:"col"},P=(0,a._)("label",{for:"userName",class:"form-label"},"收件人姓名*",-1),S={class:"col"},I=(0,a._)("label",{for:"userEmail",class:"form-label"},"Email*",-1),Z={class:"col"},B=(0,a._)("label",{for:"userTel",class:"form-label"},"收件人電話*",-1),G={class:"col"},J=(0,a._)("label",{for:"userAddress",class:"form-label"},"收件人地址*",-1),R={class:"col"},X=(0,a._)("label",{for:"userPay",class:"form-label"},"付款方式*",-1),ee=(0,a._)("option",{disabled:"",value:""},"請選擇付款方式",-1),se=["value"],le={class:"col"},ae=(0,a._)("label",{for:"userMessage",class:"form-label"},"留言",-1),te=(0,a._)("div",{class:"col d-flex justify-content-end"},[(0,a._)("button",{type:"submit",class:"btn btn-brown mt-4"}," 前往結帳 ")],-1);function re(e,s,l,re,oe,ce){const ie=(0,a.up)("LoadingView"),de=(0,a.up)("VField"),ne=(0,a.up)("ErrorMessage"),me=(0,a.up)("VForm");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(ie,{active:oe.isLoading},null,8,["active"]),o,(0,a._)("section",c,[(0,a._)("div",i,[(0,a._)("div",d,[(0,a._)("div",n,[(0,a._)("div",m,[(0,a._)("div",u,[(0,a._)("div",_,[b,(0,a._)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(oe.cart.carts,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"col-10",key:e.id},[(0,a._)("div",f,[(0,a._)("div",v,[(0,a._)("div",w,[(0,a._)("img",{src:e.product.imageUrl,class:"img-fluid",alt:e.product.title},null,8,h)]),(0,a._)("div",g,[(0,a._)("div",y,[(0,a._)("h5",x,(0,t.zw)(e.product.title),1),(0,a._)("p",V,"數量："+(0,t.zw)(e.qty),1),(0,a._)("p",k,"NT$ "+(0,t.zw)(e.product.price),1)])])])])])))),128))])]),(0,a._)("div",W,[(0,a._)("div",null,[$,(0,a._)("table",z,[(0,a._)("tbody",null,[(0,a._)("tr",null,[(0,a._)("td",U,"共 "+(0,t.zw)(oe.cartQty)+" 筆商品",1)]),(0,a._)("tr",null,[C,(0,a._)("td",E," NT$ "+(0,t.zw)(e.$filters.currency(oe.cart.total)),1)]),(0,a._)("tr",null,[N,(0,a._)("td",T," NT$ "+(0,t.zw)(e.$filters.currency(oe.deliveryFee)),1)]),(0,a._)("tr",j,[q,(0,a._)("td",L," - NT$ "+(0,t.zw)(e.$filters.currency(oe.cart.total-oe.cart.final_total)),1)]),(0,a._)("tr",D,[M,(0,a._)("td",F," NT$ "+(0,t.zw)(e.$filters.currency(oe.cart.final_total)),1)])])])])])])])]),(0,a._)("div",H,[(0,a._)("div",Q,[(0,a._)("div",Y,[(0,a._)("div",A,[K,(0,a.Wm)(me,{class:"row flex-column g-3 mt-3",onSubmit:ce.createOrder},{default:(0,a.w5)((({errors:e})=>[(0,a._)("div",O,[P,(0,a.Wm)(de,{type:"text",name:"姓名",class:(0,t.C_)(["form-control border-brown text-brown",{"is-invalid":e["姓名"]}]),id:"userName",placeholder:"請輸入姓名",rules:"required",modelValue:oe.from.user.name,"onUpdate:modelValue":s[0]||(s[0]=e=>oe.from.user.name=e)},null,8,["class","modelValue"]),(0,a.Wm)(ne,{name:"姓名",class:"invalid-feedback"})]),(0,a._)("div",S,[I,(0,a.Wm)(de,{type:"email",name:"Email",class:(0,t.C_)(["form-control border-brown text-brown",{"is-invalid":e["Email"]}]),id:"userEmail",placeholder:"請輸入Email",rules:"email|required",modelValue:oe.from.user.email,"onUpdate:modelValue":s[1]||(s[1]=e=>oe.from.user.email=e)},null,8,["class","modelValue"]),(0,a.Wm)(ne,{name:"Email",class:"invalid-feedback"})]),(0,a._)("div",Z,[B,(0,a.Wm)(de,{type:"tel",name:"電話",class:(0,t.C_)(["form-control border-brown text-brown",{"is-invalid":e["電話"]}]),id:"userTel",placeholder:"請輸入電話",rules:"required",modelValue:oe.from.user.tel,"onUpdate:modelValue":s[2]||(s[2]=e=>oe.from.user.tel=e)},null,8,["class","modelValue"]),(0,a.Wm)(ne,{name:"電話",class:"invalid-feedback"})]),(0,a._)("div",G,[J,(0,a.Wm)(de,{type:"text",name:"地址",class:(0,t.C_)(["form-control border-brown text-brown",{"is-invalid":e["地址"]}]),id:"userAddress",placeholder:"請輸入地址",rules:"required",modelValue:oe.from.user.address,"onUpdate:modelValue":s[3]||(s[3]=e=>oe.from.user.address=e)},null,8,["class","modelValue"]),(0,a.Wm)(ne,{name:"地址",class:"invalid-feedback"})]),(0,a._)("div",R,[X,(0,a.Wm)(de,{id:"userPay",name:"付款方式",class:(0,t.C_)(["form-control border-brown text-brown",{"is-invalid":e["付款方式"]}]),rules:"required",modelValue:oe.from.payment_method,"onUpdate:modelValue":s[4]||(s[4]=e=>oe.from.payment_method=e),as:"select"},{default:(0,a.w5)((()=>[ee,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(oe.paymentMethod,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.value,value:e.value},(0,t.zw)(e.value),9,se)))),128))])),_:2},1032,["class","modelValue"]),(0,a.Wm)(ne,{name:"付款方式",class:"invalid-feedback"})]),(0,a._)("div",le,[ae,(0,a.wy)((0,a._)("textarea",{style:{resize:"none"},class:"form-control border-brown text-brown",id:"userMessage",rows:"3","onUpdate:modelValue":s[5]||(s[5]=e=>oe.from.message=e)},null,512),[[r.nr,oe.from.message]])]),te])),_:1},8,["onSubmit"])])])])])])])])],64)}l(7658);var oe={data(){return{cart:{},deliveryFee:0,cartQty:0,from:{user:{name:"",email:"",tel:"",address:""},message:"",payment_method:""},paymentMethod:[{value:"貨到付款"}],isLoading:!1}},methods:{getCart(){const e="https://vue3-course-api.hexschool.io/api/gary123-api/cart";this.isLoading=!0,this.axios.get(e).then((e=>{e.data.success&&(this.cart=e.data.data,this.isLoading=!1,this.cartQty=e.data.data.carts.length)})).catch((e=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:e.response.data.message})}))},createOrder(){const e="https://vue3-course-api.hexschool.io/api/gary123-api/order",s=this.from;this.axios.post(e,{data:s}).then((e=>{this.from={},this.$router.push(`/checkout/${e.data.orderId}`)})).catch((e=>{this.emitter.emit("push-message",{style:"danger",title:e.response.data.message})}))}},created(){this.getCart()}},ce=l(89);const ie=(0,ce.Z)(oe,[["render",re]]);var de=ie}}]);
//# sourceMappingURL=720.b897090f.js.map