"use strict";(self["webpackChunkproject_vue3_finally"]=self["webpackChunkproject_vue3_finally"]||[]).push([[834],{9998:function(t,e,s){s.r(e),s.d(e,{default:function(){return J}});var a=s(3396),i=s(7139),l=s(9242);const c=(0,a._)("section",{class:"mt-7"},[(0,a._)("div",{class:"container"},[(0,a._)("div",{class:"row justify-content-center align-items-center position-relative mt-5"},[(0,a._)("div",{class:"col-10"},[(0,a._)("div",{class:"progress mx-3",style:{height:"5px"}},[(0,a._)("div",{class:"progress-bar bg-beige",role:"progressbar",style:{width:"0%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})])]),(0,a._)("div",{class:"col-10 d-flex justify-content-between position-absolute top-0 translate-middle-y mt-3"},[(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-brown text-beige rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-bag-check-fill"})]),(0,a._)("p",{class:"mb-0"},"購物車")]),(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-secondary rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-clipboard-check-fill"})]),(0,a._)("p",{class:"mb-0"},"填寫資料")]),(0,a._)("div",{class:"text-center"},[(0,a._)("span",{class:"badge bg-secondary rounded-circle p-2",style:{width:"2rem",height:"2rem"}},[(0,a._)("i",{class:"bi bi-credit-card-fill"})]),(0,a._)("p",{class:"mb-0"},"付款確認")])])])])],-1),o={key:0,class:"my-6"},n={class:"container"},r={class:"border border-2 px-2 py-5 p-lg-5"},d=(0,a._)("h2",{class:"text-center text-brown"},"購物清單目前尚無選購商品哦！",-1),p={class:"col-5 col-md-2 mx-auto mt-5"},u={key:1,class:"my-6"},h={class:"container"},b={class:"border border-2 p-3"},_={class:"row row-cols-1 g-5 mx-0 justify-content-center"},g={class:"col-12 col-lg-8 py-3 px-0 table-responsive"},m=(0,a._)("div",{class:"px-2 text-brown"},[(0,a._)("h2",{class:"fs-3"},[(0,a._)("i",{class:"bi bi-flower3"}),(0,a.Uk)("購物清單")])],-1),y={class:"table align-middle mt-3"},x=(0,a._)("thead",{class:"table-beige text-brown text-nowrap"},[(0,a._)("tr",null,[(0,a._)("th",{style:{width:"50px"}}),(0,a._)("th",{class:"ps-3",style:{width:"75px"}},"商品"),(0,a._)("th",{style:{width:"200px"}}),(0,a._)("th",{class:"text-end",style:{width:"100px"}},"單價"),(0,a._)("th",{class:"text-end",style:{width:"100px"}},"數量"),(0,a._)("th",{class:"text-end",style:{width:"100px"}},"小計")])],-1),w=["onClick"],v=(0,a._)("i",{class:"bi bi-trash3-fill"},null,-1),f=[v],C=["src"],k={class:"text-end"},L=["onUpdate:modelValue","onChange"],$={class:"text-end"},z={class:"col-12 col-lg-8 p-0 d-flex flex-column"},U=(0,a._)("div",{class:"px-2 text-brown"},[(0,a._)("h2",{class:"fs-3"},[(0,a._)("i",{class:"bi bi-flower3"}),(0,a.Uk)("購物車總計")])],-1),j={class:"col-12 col-md-6 ms-auto"},N={class:"input-group mb-3"},T={class:"mt-1"},D={class:"text-brown"},q={class:"text-end py-2",colspan:"3"},I=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"商品金額",-1),Q={class:"text-end w-50"},V=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"運費",-1),M={class:"text-end w-50"},S={class:"text-success"},F=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"優惠折扣",-1),H={class:"text-end w-50"},W={class:"border-top border-brown"},Y=(0,a._)("td",{class:"text-end py-2",colspan:"2"},"總計金額",-1),K={class:"text-end w-50"},Z={class:"mt-5 col-12 col-md-2 mx-auto"};function A(t,e,s,v,A,B){const E=(0,a.up)("LoadingView"),G=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(E,{active:A.isLoading},null,8,["active"]),c,A.cartQty?((0,a.wg)(),(0,a.iD)("section",u,[(0,a._)("div",h,[(0,a._)("div",b,[(0,a._)("div",_,[(0,a._)("div",g,[m,(0,a._)("table",y,[x,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(A.cart.carts,(t=>((0,a.wg)(),(0,a.iD)("tbody",{class:"text-nowrap text-brown",key:t.id},[(0,a._)("tr",null,[(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn btn-outline-red btn-sm",onClick:e=>B.delCart(t.product.title,t.id)},f,8,w)]),(0,a._)("td",null,[(0,a._)("img",{src:t.product.imageUrl,alt:"item.product.title",style:{width:"75px",height:"50px","background-size":"cover","background-position":"center"}},null,8,C)]),(0,a._)("td",null,(0,i.zw)(t.product.title),1),(0,a._)("td",k,"NT$ "+(0,i.zw)(t.product.price),1),(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"number",class:"form-control form-control-sm ms-auto","onUpdate:modelValue":e=>t.qty=e,min:"1",max:"10",onChange:e=>B.updateCart(t,t.qty),style:{width:"50px"}},null,40,L),[[l.nr,t.qty,void 0,{number:!0}]])]),(0,a._)("td",$," NT$ "+(0,i.zw)(t.total),1)])])))),128))])]),(0,a._)("div",z,[U,(0,a._)("div",j,[(0,a._)("div",N,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control bg-beige text-brown border-1 border-brown",placeholder:"請輸入優惠碼","aria-describedby":"coupon-code","onUpdate:modelValue":e[0]||(e[0]=t=>A.couponCode=t)},null,512),[[l.nr,A.couponCode]]),(0,a._)("button",{class:"btn btn-outline-brown",type:"button",id:"coupon-code",onClick:e[1]||(e[1]=t=>B.addCouponCode())},"套用優惠卷")])]),(0,a._)("table",T,[(0,a._)("tbody",D,[(0,a._)("tr",null,[(0,a._)("td",q,"共 "+(0,i.zw)(A.cartQty)+" 筆商品",1)]),(0,a._)("tr",null,[I,(0,a._)("td",Q,"NT$ "+(0,i.zw)(t.$filters.currency(A.cart.total)),1)]),(0,a._)("tr",null,[V,(0,a._)("td",M,"NT$ "+(0,i.zw)(t.$filters.currency(A.deliveryFee)),1)]),(0,a._)("tr",S,[F,(0,a._)("td",H,"- NT$ "+(0,i.zw)(t.$filters.currency(A.cart.total-A.cart.final_total)),1)]),(0,a._)("tr",W,[Y,(0,a._)("td",K,"NT$ "+(0,i.zw)(t.$filters.currency(A.cart.final_total)),1)])])]),(0,a._)("div",Z,[(0,a._)("button",{type:"button",onClick:e[2]||(e[2]=(...t)=>B.toCheckInfo&&B.toCheckInfo(...t)),class:"btn btn-brown w-100"},"填寫資料")])])])])])])):((0,a.wg)(),(0,a.iD)("section",o,[(0,a._)("div",n,[(0,a._)("div",r,[d,(0,a._)("div",p,[(0,a.Wm)(G,{to:"/productList",class:"btn btn-outline-brown btn-sm w-100"},{default:(0,a.w5)((()=>[(0,a.Uk)("來去逛逛吧！")])),_:1})])])])]))],64)}s(7658);var B={data(){return{cart:{},deliveryFee:0,cartQty:0,couponCode:"",isLoading:!1}},inject:{emitter:["emitter"]},methods:{getCard(){const t="https://vue3-course-api.hexschool.io/api/gary123-api/cart";this.isLoading=!0,this.axios.get(t).then((t=>{t.data.success&&(this.cart=t.data.data,this.isLoading=!1,this.cartQty=t.data.data.carts.length)})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},updateCart(t,e){const s=`https://vue3-course-api.hexschool.io/api/gary123-api/cart/${t.id}`;this.isLoading=!0;const a={product_id:t.product_id,qty:e};this.axios.put(s,{data:a}).then((t=>{t.data.success&&(this.isLoading=!1,this.getCard())})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},delCart(t,e){const s=`https://vue3-course-api.hexschool.io/api/gary123-api/cart/${e}`;this.isLoading=!0,this.axios.delete(s).then((s=>{s.data.success&&(this.isLoading=!1,this.emitter.emit("update-cart",e),this.$httpMessageStatus(s,`已將${t}移除購物車`),this.getCard())})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/gary123-api/coupon",e={code:this.couponCode};this.isLoading=!0,this.axios.post(t,{data:e}).then((t=>{t.data.success?(this.isLoading=!1,this.$httpMessageStatus(t,"套用優惠卷"),this.getCard()):(this.isLoading=!1,this.$httpMessageStatus(t,"套用優惠卷"))})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},toCheckInfo(){this.$router.push("/userCheckInfo")}},created(){this.getCard()}},E=s(89);const G=(0,E.Z)(B,[["render",A]]);var J=G}}]);
//# sourceMappingURL=834.f481aaf8.js.map