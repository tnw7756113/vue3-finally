{"version":3,"file":"js/492.6659bdb1.js","mappings":"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","sources":["webpack://project-vue3-finally/./src/methods/saveFave.js","webpack://project-vue3-finally/./src/views/frontend/FavouriteView.vue","webpack://project-vue3-finally/./src/views/frontend/FavouriteView.vue?1fe3"],"sourcesContent":["export default {\r\n  saveFavorite (fave) {\r\n    const favoriteStr = JSON.stringify(fave)\r\n    localStorage.setItem('favoriteProduct', favoriteStr)\r\n  },\r\n  getFavorite () {\r\n    return JSON.parse(localStorage.getItem('favoriteProduct'))\r\n  }\r\n}\r\n","<template>\r\n  <LoadingView :active=\"isLoading\"/>\r\n  <section class=\"mt-6\">\r\n    <div class=\"banner d-flex flex-column justify-content-center align-items-center\">\r\n      <div class=\"text-center\">\r\n        <h1 class=\"banner-title mb-3\">收藏清單</h1>\r\n        <span class=\"banner-text\">我們的和菓子一級棒！別猶豫了，趕緊加入購物車吧！</span>\r\n      </div>\r\n    </div>\r\n  </section>\r\n  <section>\r\n    <div class=\"container\">\r\n        <nav aria-label=\"breadcrumb\">\r\n          <ol class=\"breadcrumb my-3\">\r\n            <li class=\"breadcrumb-item\"><router-link class=\"breadcrumb-text\" to=\"/\">首頁</router-link></li>\r\n            <li class=\"breadcrumb-item active\" aria-current=\"page\">我的收藏</li>\r\n          </ol>\r\n        </nav>\r\n      </div>\r\n  </section>\r\n  <section class=\"my-5\" v-if=\"!faveList.length\">\r\n    <div class=\"container\">\r\n      <div class=\"border border-2 px-2 py-5 p-lg-5\">\r\n        <h2 class=\"text-center text-brown fw-bold\">收藏清單目前是空的！</h2>\r\n        <div class=\"col-5 col-md-2 mx-auto mt-5\">\r\n          <router-link to=\"/productList\" class=\"btn btn-outline-brown btn-sm w-100\">來去逛逛吧！</router-link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n  <section class=\"my-5\" v-else>\r\n    <div class=\"container\">\r\n      <div class=\"border border-2 px-1 py-5 p-lg-5\">\r\n        <div class=\"table-responsive-md\">\r\n          <table class=\"table text-nowrap\">\r\n            <thead class=\"table-beige text-brown\">\r\n              <tr>\r\n                <th colspan=\"2\"  style=\"width: 50%;\">商品</th>\r\n                <th class=\"text-end\" style=\"width: 25%;\">單價</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody class=\"text-brown\">\r\n              <tr v-for=\"item in faveProduct\" :key=\"item.id\">\r\n                <td>\r\n                  <img style=\"width: 160px; height: 107px;\"\r\n                      :src=\"item.imageUrl\"\r\n                      :alt=\"item.title\"/>\r\n                </td>\r\n                <td class=\"align-middle\">\r\n                  <p class=\"fs-5 mb-0\">{{ item.title }}</p>\r\n                </td>\r\n                <td class=\"align-middle text-end\">\r\n                  <p v-if=\"item.origin_price !== item.price\"\r\n                          class=\"fs-6 mb-0 text-decoration-line-through\">NT$ {{ item.origin_price }}</p>\r\n                  <p class=\"fs-5 mb-0\">NT$ {{ item.price }}</p>\r\n                </td>\r\n                <td class=\"align-middle text-end\">\r\n                  <div class=\"p-0\">\r\n                    <button type=\"button\" @click.prevent=\"addCart(item.id, 1)\"\r\n                    class=\"btn-cart rounded-circle p-0 me-2\">\r\n                    <i class=\"bi bi-cart4\"></i>\r\n                    </button>\r\n                    <button type=\"button\" @click.prevent=\"delFave(item)\"\r\n                    class=\"btn-trash rounded-circle p-0 me-1\">\r\n                    <i class=\"bi bi-trash\"></i>\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport saveFave from '@/methods/saveFave'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      faveList: saveFave.getFavorite() || [],\r\n      faveProduct: [],\r\n      isLoading: false\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getFave () {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.axios.get(api)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.isLoading = false\r\n            this.faveProduct = res.data.products.filter((item) => this.faveList.includes(item.id))\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.isLoading = false\r\n          this.emitter.emit('push-message', {\r\n            style: 'danger',\r\n            title: error.response.data.message\r\n          })\r\n        })\r\n    },\r\n    updateFave () {\r\n      this.faveList = saveFave.getFavorite()\r\n    },\r\n    delFave (item) {\r\n      this.isLoading = true\r\n      this.faveList.splice(this.faveList.indexOf(item.id), 1)\r\n      this.$httpMessageStatus(\r\n        {\r\n          data: {\r\n            success: true\r\n          }\r\n        }, `已將 ${item.title} 移除收藏清單`)\r\n      this.isLoading = false\r\n      saveFave.saveFavorite(this.faveList)\r\n      this.emitter.emit('update-fave', this.faveList)\r\n      this.getFave()\r\n    },\r\n    addCart (id, qty) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      const cart = {\r\n        product_id: id,\r\n        qty\r\n      }\r\n      this.axios.post(api, { data: cart })\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.emitter.emit('update-cart', id)\r\n            this.isLoading = false\r\n            this.getFave()\r\n            this.$httpMessageStatus(res, '加入購物車')\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          this.isLoading = false\r\n          this.emitter.emit('push-message', {\r\n            style: 'danger',\r\n            title: error.response.data.message\r\n          })\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.emitter.on('update-fave', this.updateFave)\r\n    this.getFave()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./FavouriteView.vue?vue&type=template&id=64a53010\"\nimport script from \"./FavouriteView.vue?vue&type=script&lang=js\"\nexport * from \"./FavouriteView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\tnw77\\\\Desktop\\\\Vue3-demo\\\\project-vue3-finally\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["saveFavorite","fave","favoriteStr","JSON","stringify","localStorage","setItem","getFavorite","parse","getItem","class","_createElementVNode","colspan","style","_hoisted_28","_hoisted_31","_createVNode","_component_LoadingView","active","$data","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_component_router_link","to","_hoisted_6","faveList","length","_createElementBlock","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_Fragment","_renderList","faveProduct","item","key","id","src","imageUrl","alt","title","_hoisted_20","_hoisted_21","_toDisplayString","_hoisted_22","origin_price","price","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","type","onClick","_withModifiers","$event","$options","addCart","delFave","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","data","saveFave","inject","methods","getFave","this","api","axios","get","then","res","success","products","filter","includes","catch","error","emitter","emit","response","message","updateFave","splice","indexOf","$httpMessageStatus","qty","cart","product_id","post","created","on","__exports__","render"],"sourceRoot":""}